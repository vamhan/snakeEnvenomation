<!DOCTYPE html>
<html ng-app="snakeEnvenomation">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>
    <script src="lib/ngCordova/dist/ng-cordova.js"></script>
    <script src="lib/angular-md5/angular-md5.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?&sensor=false"></script>

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/controller.js"></script>
    <script src="js/service.js"></script>
</head>

<body>
    <ion-side-menus ng-controller="SignInCtrl">
        <ion-side-menu side="left">
            <ion-header-bar class="bar bar-header bar-dark"></ion-header-bar>
            <ion-content style="background-image:none">
                <ion-list>
                    <ion-item nav-clear menu-close href="#" class="item-icon-right" ng-click="newCase()">
                        Add new case
                        <i class="icon ion-ios-plus-outline"></i>
                    </ion-item>
                    <ion-item nav-clear menu-close href="#" class="item-avatar" ng-click="selectRecord(record)" ng-repeat="(index, record) in activeRecords">
                        <img ng-src="{{record.snake.imgs[0]}}">
                        <h2>{{record.patient.patient_name}}</h2>
                        <p>{{record.dateFormat + " " + record.incident_time}}</p>
                        <span class="badge badge-assertive" style="right:10px" ng-show="record.transaction.action">1</span>
                    </ion-item>
                </ion-list>
            </ion-content>
        </ion-side-menu>

        <ion-side-menu-content>
            <ion-nav-bar class="bar-positive nav-title-slide-ios7">
                <ion-nav-back-button class="button-icon"><span class="icon ion-ios-arrow-left"></span></ion-nav-back-button>
            </ion-nav-bar>
            <ion-nav-view></ion-nav-view>
        </ion-side-menu-content>

    </ion-side-menus>
    
    <script id="sign-in.html" type="text/ng-template">
        <ion-view>
            <ion-nav-buttons side="left">
                <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
            </ion-nav-buttons>   
            <ion-content>
                <div style="float:right" class="light">V 1.1</div>
                <div style="text-align:center">
                    <img ng-src="img/logo.png" width="250px">
                </div>
                <div class="header_title">
                    <h1 class="light" style="font-weight:600">Mahidol Snake Envenomation<br>Support System</h1>
                </div>
                <form name="signinForm" novalidate="" ng-submit="login(signinForm, user, patient)">
                    <div class="list list-inset">
                        <label class="item item-input" ng-class="{ 'has-error' : signinForm.username.$invalid && signinForm.$submitted}">
                            <input type="text" placeholder="Physician ID" name="username" ng-model="user.username" required>
                        </label>
                        <div class="form-error" ng-show="signinForm.username.$error.required && signinForm.$submitted">This field is required.</div>
                        <label class="item item-input" ng-class="{ 'has-error' : signinForm.patientID.$invalid && signinForm.$submitted}">
                            <input type="text" placeholder="Patient ID" name="patientID" ng-model="patient.id" ng-pattern="/^[0-9]{13}$/" required>
                        </label>
                        <div class="form-error" ng-show="signinForm.patientID.$error.required && signinForm.$submitted">This field is required.</div>
                        <div class="form-error" ng-show="signinForm.patientID.$error.pattern && signinForm.$submitted">This field should be only number with length 13</div>
                    </div>
                    <div class="padding">
                        <button class="button button-block button-positive" type="submit">
                            Submit
                        </button>
                    </div>
                </form>
            </ion-content>
        </ion-view>
    </script>

</body>

</html>